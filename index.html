<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<!-- ĞÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½Ğ½Ñ‹Ğ¼ â€” Ğ»ÑƒÑ‡ÑˆĞµ Ğ´Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚Ğ¸ -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>You Win - Halloween Skeleton Quest</title>
<style>
  /* ĞŸÑ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ğ°Ğ²Ñ‚Ğ¾-ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞºÑÑ‚Ğ° Ğ½Ğ° iOS/Android */
  html { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }

  :root { font-size: 16px; }

  body {
    margin: 0;
    padding: 0;
    background: #000;
    color: #00FF00;
    font-family: 'Courier New', monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 100px;
    min-height: 100vh;
    overflow-x: hidden;
  }

  h1 { font-size: 2.2rem; text-align:center; margin: 0 0 20px; }
  .button-container { margin-bottom: 22px; text-align:center; width:100%; }

  button.choice-btn {
    display: block;
    width: 320px;
    max-width: 92vw;
    margin: 0 auto 8px auto;
    padding: 14px;
    font-size: 1.25rem;
    font-weight: 700;
    border: 2px solid #00FF00;
    border-radius: 12px;
    cursor: pointer;
    transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
    background-color: #111;
    color: #00FF00;
    box-shadow: 0 0 8px #00FF00;
  }
  button.choice-btn:hover { transform: scale(1.03); }
  button.choice-btn.selected {
    background-color: #00FF00;
    color: #000;
    box-shadow: 0 0 20px #00FF00;
    transform: scale(1.03);
  }

  .description {
    font-size: 1.05rem;
    color: #7FFF7F;
    margin: 0 auto 12px;
    line-height: 1.4;
    min-height: 3rem;
    max-width: 92vw;
  }

  /* Pumpkin */
  .pumpkin { position:absolute; width:110px; height:110px; top:18px; left:50%; transform:translateX(-50%); background:orange; border-radius:50%; display:flex; flex-direction:column; align-items:center; justify-content:center; animation: flicker 1s infinite; z-index:1; }
  .eyes{ width:18px; height:18px; background:#000; border-radius:50%; margin:4px; }
  .mouth{ width:44px; height:9px; background:#000; margin-top:8px; border-radius:0 0 8px 8px; }
  @keyframes flicker { 0%,100%{opacity:1} 50%{opacity:.35} }

  /* Modal */
  #nameModal {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.72);
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity .16s ease;
  }
  #nameModal.open { opacity: 1; pointer-events: auto; }

  .modal-card {
    background: #0d0d0d;
    padding: 28px;
    border-radius: 14px;
    width: min(420px, 92%);
    color: #00FF00;
    box-shadow: 0 0 20px #00FF00;
    text-align: center;
  }

  .modal-card .title { font-size: 1.6rem; font-weight: 800; margin-bottom: 18px; }

  /* ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ: font-size >= 16px Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ zoom Ğ½Ğ° Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… */
  #userName {
    width: 100%;
    padding: 10px;
    font-size: 16px; /* Ğ²Ğ°Ğ¶Ğ½Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ */
    border-radius: 8px;
    border: 2px solid #00FF00;
    background: #222;
    color: #00FF00;
    margin-bottom: 16px;
    box-sizing: border-box;
  }

  .ok-btn {
    padding: 10px 22px;
    font-size: 1.1rem;
    font-weight: 700;
    border-radius: 9px;
    border: 2px solid #00FF00;
    background: #111;
    color: #00FF00;
    cursor: pointer;
    box-shadow: 0 0 8px #00FF00;
  }

  /* Ğ½ĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ°Ñ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºĞ¸Ñ… ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ² */
  @media (max-width: 380px) {
    h1 { font-size: 1.6rem; }
    button.choice-btn { font-size: 1.05rem; padding: 12px; }
  }
</style>
</head>
<body>

<div class="pumpkin">
  <div class="eyes"></div>
  <div class="eyes"></div>
  <div class="mouth"></div>
</div>

<h1>ğŸƒ Gratulacje! ZnalazÅ‚eÅ› sekret szkieleta ğŸƒ</h1>
<h1>ğŸ‰ Wybierz swojÄ… nagrodÄ™ ğŸ‰</h1>

<div class="button-container">
  <button class="choice-btn" onclick="sendChoice('Poznaj swojÄ… przyszÅ‚oÅ›Ä‡', 'Otrzymaj przepowiedniÄ™ od szkieleta ğŸ˜ˆ', this)">Poznaj swojÄ… przyszÅ‚oÅ›Ä‡ âœ¨</button>
  <div class="description">Otrzymaj przepowiedniÄ™ od szkieleta ğŸ˜ˆ</div>
</div>

<div class="button-container">
  <button class="choice-btn" onclick="sendChoice('Debug Potion', 'Eliksir naprawy bÅ‚Ä™dÃ³w ğŸ§ª', this)">Debug Potion ğŸ§ª</button>
  <div class="description">Eliksir naprawy bÅ‚Ä™dÃ³w. Trzeba byÄ‡ pierwszy! JeÅ›li nagroda zostaÅ‚a juÅ¼ zabrana, zostaniesz z niczym ğŸ˜ˆ</div>
</div>

<div class="button-container">
  <button class="choice-btn" onclick="sendChoice('Skrzynia szkieleta', 'GÅ‚Ã³wna nagroda od koÅ›cianego wÅ‚adcy nocy ğŸ', this)">Skrzynia szkieleta ğŸ</button>
  <div class="description">GÅ‚Ã³wna nagroda od szkieleta! Trzeba byÄ‡ pierwszy! JeÅ›li nagroda zostaÅ‚a juÅ¼ zabrana, zostaniesz z niczym ğŸ˜ˆ</div>
</div>

<div class="button-container">
  <button class="choice-btn" onclick="sendChoice('Szkieletowy smakoÅ‚yk', 'SÅ‚odycz prosto od samego szkieleta ğŸ¬', this)">Szkieletowy smakoÅ‚yk ğŸ¬</button>
  <div class="description">SÅ‚odycz prosto od samego szkieleta. Do wyczerpania zapasÃ³w ğŸ˜ˆ</div>
</div>

<!-- ĞœĞ¾Ğ´Ğ°Ğ»ĞºĞ° -->
<div id="nameModal" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="namePrompt">
    <div id="namePrompt" class="title">Wpisz swoje imiÄ™ ğŸŒŸ</div>
    <input id="userName" type="text" inputmode="text" autocomplete="name" placeholder="Twoje imiÄ™">
    <div><button class="ok-btn" onclick="submitName()">OK</button></div>
  </div>
</div>

<script>
/* ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ, Ğ½Ğ°Ğ´Ñ‘Ğ¶Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° */
let pendingChoice = null;
let modal = document.getElementById('nameModal');
let input = document.getElementById('userName');

function sendChoice(choice, description, btn) {
  // ÑĞ½ÑÑ‚ÑŒ Ğ¿Ğ¾Ğ´ÑĞ²ĞµÑ‚ĞºÑƒ ÑĞ¾ Ğ²ÑĞµÑ…
  document.querySelectorAll('button.choice-btn').forEach(b => b.classList.remove('selected'));
  // Ğ¿Ğ¾Ğ´ÑĞ²ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½ÑƒÑ
  btn.classList.add('selected');

  pendingChoice = { choice, description };

  // Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¼Ğ¾Ğ´Ğ°Ğ»ĞºÑƒ
  modal.classList.add('open');
  modal.setAttribute('aria-hidden', 'false');

  // ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ¸Ğ¼ Ğ½Ğ°Ğ²ĞµÑ€Ñ…, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ° Ğ½Ğµ ÑƒĞµÑ…Ğ°Ğ»Ğ° ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ´Ğ°Ğ»ĞµĞºĞ¾
  window.scrollTo(0, 0);

  // ÑÑ‚Ğ°Ğ²Ğ¸Ğ¼ Ñ„Ğ¾ĞºÑƒÑ Ñ Ğ½ĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ Ğ´Ğ»Ñ UX (Ğ½Ğµ ÑÑ‚Ğ°Ğ²Ğ¸Ğ¼ Ğ°Ğ²Ñ‚Ğ¾Ñ„Ğ¾ĞºÑƒÑ ÑÑ€Ğ°Ğ·Ñƒ)
  setTimeout(() => {
    try { input.focus(); } catch(e){}
  }, 140);
}

function submitName() {
  const user = input.value.trim();
  if (!user) {
    alert("ProszÄ™ wpisaÄ‡ swoje imiÄ™!");
    input.focus();
    return;
  }

  // Ğ¿Ñ€ÑÑ‡ĞµĞ¼ Ğ¼Ğ¾Ğ´Ğ°Ğ»ĞºÑƒ
  modal.classList.remove('open');
  modal.setAttribute('aria-hidden', 'true');

  // ÑĞ½Ğ¸Ğ¼Ğ°ĞµĞ¼ Ñ„Ğ¾ĞºÑƒÑ -> ÑÑ‚Ğ¾ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ zoom Ğ½Ğ° Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ…
  input.blur();

  // ÑÑ‚Ñ€Ğ°Ñ…Ğ¾Ğ²Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ scrollTo Ñ‡ĞµÑ€ĞµĞ· Ğ½ĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚
  setTimeout(() => { window.scrollTo(0, 0); }, 120);

  // Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€
  fetch('https://62bc1842cecf.ngrok-free.app/choose', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      user: user,
      choice: pendingChoice ? pendingChoice.choice : null,
      description: pendingChoice ? pendingChoice.description : null
    })
  })
  .then(res => {
    alert("ğŸ’€ Szkielet zna twÃ³j wybÃ³r! Podaj swoje imiÄ™ i odbierz nagrodÄ™");
  })
  .catch(err => {
    alert("âš ï¸ Automat szkieleta siÄ™ zepsuÅ‚, ale jeÅ›li pokaÅ¼esz mu tÄ™ wiadomoÅ›Ä‡, otrzymasz swojÄ… nagrodÄ™");
  });

  // Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ°
  pendingChoice = null;
  input.value = '';
}
</script>

</body>
</html>
